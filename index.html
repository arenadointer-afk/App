<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Minhas Contas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="manifest" href="/App/manifest.json">
<meta name="theme-color" content="#7b2ff7">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="lock" class="lock" style="background: #0f0f14;">
  <div style="text-align:center; padding: 20px; max-width: 300px;">
    <div style="font-size: 60px; margin-bottom: 20px;">ğŸ›¡ï¸</div>
    <h2 style="color:white; margin-bottom: 10px;">Acesso Restrito</h2>
    <p style="color: #888; margin-bottom: 30px; font-size: 14px;">Identifique-se para continuar</p>
    
    <button onclick="acaoBotaoBiometria()" style="width: 100%; background:#7b2ff7; color: white; border: none; padding: 15px; border-radius: 12px; font-weight: bold; margin-bottom: 15px; cursor: pointer;">
      USAR BIOMETRIA
    </button>

    <button onclick="pedirPinFallback()" style="width: 100%; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer;">
      DIGITAR PIN
    </button>
  </div>
</div>


<div id="app" style="display:none">

  <div class="topo">
    <div class="perfil">
      <img id="fotoPerfil" src="https://via.placeholder.com/50" alt="Foto">
      <input type="file" id="uploadFoto" hidden accept="image/*">
      <h2 style="margin:0; font-size:18px;">Bem-vindo, Sutello.</h2>
    </div>

  </div>

  <div class="filtros">
    <button class="ativo" onclick="setFiltro('todas', this)">Todas</button>
    <button onclick="setFiltro('pagas', this)">Pagas</button>
  </div>

  <div id="lista" class="lista"></div>
    <div id="historicoLogs" style="display:none; padding: 15px; padding-bottom: 80px;">
      <h2 style="text-align:center;">ğŸ“œ Registro de Atividades</h2>
      <div style="text-align:center; margin-bottom:15px;">
        <button onclick="limparLogs('dia')" style="background:#555; border:none; padding:5px 10px; border-radius:5px; color:white; margin:2px;">Limpar Hoje</button>
        <button onclick="limparLogs('mes')" style="background:#555; border:none; padding:5px 10px; border-radius:5px; color:white; margin:2px;">Limpar MÃªs</button>
        <button onclick="limparLogs('tudo')" style="background:#c62828; border:none; padding:5px 10px; border-radius:5px; color:white; margin:2px;">Limpar Tudo</button>
      </div>
      <div id="listaLogs"></div>
      <button onclick="fecharHistoricoLogs()" style="width:100%; padding:12px; background:#333; color:white; border:none; border-radius:8px; margin-top:20px;">Voltar</button>
  </div>


  <div class="rodape">
    <button onclick="adicionarConta()">â• Nova</button>
    <button onclick="abrirHistorico()">ğŸ“Š HistÃ³rico</button>
    <button onclick="abrirCalculadora()">ğŸ§® Calc</button>
    <button onclick="abrirOpcoes()">âš™ï¸ OpÃ§Ãµes</button>
  </div>

</div>

<div id="modalCalc" class="modal" style="display:none">
  <div class="modal-conteudo">
    <h3>ğŸ§® Calculadora</h3>
    <input type="text" id="calcDisplay" readonly>
    <div class="calc-grid">
      <button onclick="calcAdd('7')">7</button><button onclick="calcAdd('8')">8</button><button onclick="calcAdd('9')">9</button><button onclick="calcAdd('/')">Ã·</button>
      <button onclick="calcAdd('4')">4</button><button onclick="calcAdd('5')">5</button><button onclick="calcAdd('6')">6</button><button onclick="calcAdd('*')">Ã—</button>
      <button onclick="calcAdd('1')">1</button><button onclick="calcAdd('2')">2</button><button onclick="calcAdd('3')">3</button><button onclick="calcAdd('-')">âˆ’</button>
      <button onclick="calcAdd('0')">0</button><button onclick="calcAdd('.')">.</button><button onclick="calcCalcular()">=</button><button onclick="calcAdd('+')">+</button>
    </div>
    <button onclick="calcLimpar()" style="background:#ef5350; color:white;">ğŸ§¹ Limpar</button>
    <button onclick="fecharCalculadora()" style="background:#9e9e9e; color:white;">âŒ Fechar</button>
  </div>
</div>

<div id="modalOpcoes" class="modal" style="display:none">
  <div class="modal-conteudo">
    <h3>âš™ï¸ ConfiguraÃ§Ãµes</h3>
    <p style="font-size:13px; color:#666; text-align:center;">Salve seus dados ou restaure de um arquivo antigo.</p>
    
    <button onclick="baixarBackup()" style="background:#7b2ff7; color:white; margin-bottom:10px;">ğŸ’¾ Salvar Backup (Baixar)</button>
    
    <button onclick="document.getElementById('inputRestore').click()" style="background:#333; color:white;">ğŸ“‚ Restaurar Backup</button>
    <input type="file" id="inputRestore" hidden onchange="lerArquivoBackup(this)" accept=".json">
    
    <hr style="margin: 15px 0; border: 0; border-top: 1px solid #eee;">
    
    <button onclick="fecharOpcoes()" style="background:#9e9e9e; color:white;">âŒ Fechar</button>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script> 
<script src="app.js"></script>
  <script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker.register("/App/service-worker.js");
    });
  }
</script>
<div id="modalDecisao" class="modal" style="display:none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); align-items: center; justify-content: center;">
  <div class="modal-conteudo" style="background: #1c1c26; padding: 25px; border-radius: 15px; text-align: center; width: 85%; max-width: 320px; border: 1px solid #333;">
    <h3 id="tituloDecisao" style="color: white; margin-top: 0;">ğŸ›¡ï¸ SeguranÃ§a</h3>
    <p id="textoDecisao" style="color: #ccc; margin: 20px 0;"></p>
    <div style="display: flex; flex-direction: column; gap: 10px;">
      <button id="btnOpcao1" style="background: #7b2ff7; color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer;">CONFIRMAR</button>
      <button id="btnOpcao2" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid #444; padding: 12px; border-radius: 8px; cursor: pointer;">CANCELAR</button>
    </div>
  </div>
</div>

</body>
</html>